---
Title: mpstat -P ALL 1
Description: |
  CPU間のバランス。ひとつのCPUだけがビジー状態ならスレッドのスケーリングに問題がある。

  `mpstat`はLinuxシステムにおけるプロセッサ関連の統計情報を報告するコマンド。
   CPU使用率、割り込み、コンテキストスイッチなど、CPUアクティビティに関する詳細な情報を提供する。
    特にマルチプロセッサ環境で有用で、個々のCPUコアの統計情報を収集できる。

  - **-P ALL**: すべてのプロセッサ（CPUコア）の統計情報を表示する。
  - **1**: 1秒間隔で情報を更新する。

  **出力例:**
  ```
  Linux 5.15.0-105-generic (hostname) 10/29/2025 _x86_64_ (8 CPU)

  16:05:53     CPU    %usr   %nice    %sys   %iowait    %irq   %soft  %steal  %guest  %gnice   %idle
  16:05:54     all    0.50    0.00    0.25      0.00    0.00    0.00    0.00    0.00    0.00   99.25
  16:05:54       0    0.00    0.00    0.00      0.00    0.00    0.00    0.00    0.00    0.00  100.00
  16:05:54       1    1.00    0.00    0.00      0.00    0.00    0.00    0.00    0.00    0.00   99.00
  ...
  ```

  **結果の見方:**

  - **CPU**: 統計情報が表示されているCPUコア。`all`は全CPUの平均。
  - **%usr**: ユーザーレベルで費やされたCPU時間の割合。
  - **%nice**: nice優先度を持つユーザーレベルで費やされたCPU時間の割合。
  - **%sys**: システム（カーネル）レベルで費やされたCPU時間の割合。
  - **%iowait**: システムが未処理のディスクI/O要求を持っている間にCPUがアイドル状態であった時間の割合。
                 この値が高い場合、I/Oボトルネックの可能性を示す。
  - **%irq**: ハードウェア割り込みの処理にCPUが費やした時間の割合。
  - **%soft**: ソフトウェア割り込みの処理にCPUが費やした時間の割合。
  - **%steal**: 仮想環境で、ハイパーバイザーによって「盗まれた」CPU時間の割合。
  - **%guest**: 仮想プロセッサの実行にCPUが費やした時間の割合。
  - **%gnice**: nice化されたゲストの実行にCPUが費やした時間の割合。
  - **%idle**: CPUがアイドル状態であり、システムが未処理のディスクI/O要求を持っていなかった時間の割合。

  特定のCPUコアの`%idle`が極端に低い、または`%usr`, `%sys`, `%iowait`が高い場合、
  そのCPUコアに負荷が集中している可能性がある。
Tags:
  - linux
  - performance
  - cpu
---

```bash
mpstat -P ALL 1
```

